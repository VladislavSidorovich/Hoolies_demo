import React, { useState, useEffect } from "react";
import style from "./EyeMan.module.scss";

const Eye = ({ size = 3.68 }) => {
  // Размер глаза в vw (например, 10vw)
  const [pupilPosition, setPupilPosition] = useState({ x: 0, y: 0 });

  const handleMouseMove = (event) => {
    // Устанавливаем координаты центра глаза
    const eyeCenterX = window.innerWidth / 2; // Центр глаза по горизонтали
    const eyeCenterY = window.innerHeight / 2; // Центр глаза по вертикали

    // Вычисляем угол наклона относительно мыши
    const angle = Math.atan2(event.clientY - eyeCenterY, event.clientX - eyeCenterX);

    // Ограничиваем смещение зрачка
    const pupilOffset = (window.innerWidth * (size / 100)) * 0.07; // Максимальное смещение зрачка (10% от размера глаза)
    const pupilX = Math.cos(angle) * pupilOffset;
    const pupilY = Math.sin(angle) * pupilOffset;

    setPupilPosition({ x: pupilX, y: pupilY });
  };

  useEffect(() => {
    document.addEventListener("mousemove", handleMouseMove);
    return () => {
      document.removeEventListener("mousemove", handleMouseMove);
    };
  }, [size]);

  // Размер глаза в пикселях, рассчитанный из vw
  const scaledSize = (window.innerWidth * size) / 100;

  return (
    <div
      className={style.eye_container_man}
      style={{
        width: `${scaledSize}px`, // Размер глаза в пикселях
        height: `${scaledSize}px`,
        margin: "auto",
        position: "relative",
        overflow: "visible", // Убедимся, что глаз не обрезается
      }}
    >
      <svg
        width={scaledSize}
        height={scaledSize}
        viewBox="0 0 140 140"
        xmlns="http://www.w3.org/2000/svg" 
        enableBackground="new 0 0 3840 1989.254"
        xmlSpace="preserve"
        style={{
            display: "block",
            overflow: "visible",
        }}
        >
       
      <g class="layer">
      <title>Layer 1</title>
      <g id="svg_1">
      <path d="m77.39,83.64c-0.2,0 -0.41,-0.03 -0.6,-0.1c-4.23,-1.53 -8.65,-2.17 -13.33,-2.85c-1.57,-0.22 -3.13,-0.46 -4.7,-0.72c-6.22,-1.05 -12.33,-2.57 -18.05,-4.04c-0.38,-0.1 -0.71,-0.31 -0.95,-0.62c-3.84,-4.92 -6.06,-10.91 -6.35,-17.14c-0.38,-7.48 2.03,-14.84 6.76,-20.66c0.12,-0.15 0.23,-0.28 0.34,-0.41c0.03,-0.05 0.06,-0.09 0.1,-0.12c2.58,-3.04 5.72,-5.54 9.26,-7.36c1.2,-0.62 2.44,-1.16 3.72,-1.61c2.79,-0.99 5.72,-1.57 8.69,-1.71c0.51,-0.03 1.03,-0.04 1.54,-0.04c4.06,0 8.02,0.8 11.76,2.38c2.68,1.13 5.19,2.64 7.44,4.48c2.09,1.71 3.94,3.68 5.51,5.88c0.24,0.34 0.48,0.69 0.71,1.04c2.08,3.18 3.54,6.72 4.31,10.44c0.32,1.54 0.52,3.12 0.6,4.69c0.58,11.63 -5.68,22.72 -15.93,28.26c-0.26,0.14 -0.55,0.21 -0.83,0.21z" fill="#e2f2a5" id="svg_2"/>
      <path
      style={{
          transform: `translate(${pupilPosition.x}px, ${pupilPosition.y}px)`,
          transition: "transform 0.05s",
      }}
       d="m63.82,28.01c3.92,0 7.66,0.8 11.08,2.24c2.52,1.06 4.88,2.48 7,4.22c1.97,1.61 3.72,3.48 5.21,5.55c0.23,0.32 0.45,0.65 0.66,0.98c1.96,2.99 3.34,6.33 4.07,9.83c0.29,1.44 0.49,2.91 0.56,4.43c0.57,11.39 -5.61,21.55 -15.01,26.63c-5.88,-2.12 -12.18,-2.61 -18.34,-3.65c-6.02,-1.02 -11.98,-2.49 -17.91,-4.01c-3.61,-4.63 -5.7,-10.27 -5.98,-16.15c-0.36,-7.05 1.91,-13.99 6.37,-19.47c0.12,-0.14 0.24,-0.28 0.35,-0.43l0.01,0c2.43,-2.89 5.42,-5.27 8.78,-7.01c1.13,-0.58 2.3,-1.09 3.5,-1.51c2.63,-0.94 5.4,-1.48 8.19,-1.61c0.49,-0.03 0.98,-0.04 1.46,-0.04m0,-3.5c-0.54,0 -1.09,0.01 -1.64,0.04c-3.13,0.15 -6.23,0.76 -9.19,1.81c-1.02,0.36 -2.07,0.8 -3.11,1.29c-1.24,0.6 -2.45,1.28 -3.61,2.03c-2.6,1.7 -4.95,3.76 -6.96,6.12c-0.06,0.07 -0.12,0.14 -0.18,0.21c-0.09,0.12 -0.19,0.23 -0.29,0.35l-0.03,0.05c-5,6.15 -7.55,13.93 -7.15,21.85c0.31,6.59 2.66,12.92 6.72,18.12c0.48,0.62 1.14,1.05 1.89,1.25c5.76,1.47 11.9,3 18.2,4.07c1.59,0.26 3.18,0.5 4.73,0.72c4.59,0.67 8.93,1.3 13,2.77c0.93,0.34 1.97,0.26 2.85,-0.22c10.85,-5.86 17.46,-17.59 16.85,-29.89c-0.08,-1.67 -0.29,-3.32 -0.63,-4.96c-0.81,-3.93 -2.36,-7.68 -4.56,-11.04c-0.24,-0.37 -0.49,-0.73 -0.75,-1.09c-2.09,-2.92 -4.64,-5.47 -7.57,-7.55c-1.91,-1.36 -3.97,-2.51 -6.14,-3.42c-3.93,-1.66 -8.16,-2.52 -12.43,-2.51z" id="svg_3"/>
      <path
      style={{
        transform: `translate(${pupilPosition.x}px, ${pupilPosition.y}px)`,
        transition: "transform 0.05s",
      }}
      d="m49.78,76.42c2.74,0.62 5.49,1.18 8.26,1.65c3.38,0.57 6.8,0.97 10.18,1.57c10.96,-2.57 18.87,-12.67 18.3,-24.32c-0.65,-13.11 -11.81,-23.22 -24.93,-22.58s-23.23,11.81 -22.58,24.93c0.39,7.91 4.61,14.73 10.77,18.75z" fill="#bdce76" id="svg_4"/>
      <path
        style={{
          transform: `translate(${pupilPosition.x}px, ${pupilPosition.y}px)`,
          transition: "transform 0.05s",
      }}
       d="m61.53,73.26c-9.58,0 -17.45,-7.51 -17.93,-17.08c-0.48,-9.89 7.17,-18.34 17.06,-18.83c0.3,-0.01 0.6,-0.02 0.9,-0.02c6.88,0 13.25,4.02 16.21,10.25c1.02,2.14 1.6,4.46 1.71,6.83c0.2,4.09 -1,8.12 -3.4,11.43c-3.37,4.67 -8.79,7.43 -14.55,7.42z" fill="#1c1a19" id="svg_5"/>
      <path
      style={{
        transform: `translate(${pupilPosition.x}px, ${pupilPosition.y}px)`,
        transition: "transform 0.05s",
      }}
       d="m58.68,54.61c1.14,2.7 7.49,5.88 12.99,8.2c2.17,-2.98 3.25,-6.63 3.07,-10.32c-0.11,-2.13 -0.63,-4.23 -1.55,-6.16c-8.15,1.55 -15.82,5.16 -14.51,8.28z" fill="#353942" id="svg_6" stroke="#000" strokeLinecap="round" strokeLinejoin="round" strokeMiterlimit="10" strokeWidth="3.5"/>
      <path
       d="m74.98,87.48c-3.42,0 -7.02,-0.23 -10.71,-0.69c-3.71,-0.46 -7.34,-0.99 -10.8,-1.57c-19.69,-3.3 -30.78,-7.64 -35.63,-9.94c-2.16,-1.02 -3.28,-3.43 -2.69,-5.73c0.38,-1.44 1.37,-2.63 2.72,-3.26s2.89,-0.61 4.23,0.02c6.27,3 20.22,8.45 43.31,11.32c3.31,0.41 6.53,0.62 9.57,0.62c9.59,0 17.79,-2.06 24.36,-6.13c7.26,-4.49 10.44,-10.14 11.47,-12.36c0.69,-1.51 2.75,-6.86 -0.08,-12.54c-3.1,-6.21 -11.22,-10.88 -23.49,-13.51c-17.88,-3.84 -35.82,-4.64 -47.73,-4.64c-8.67,0 -14.19,0.43 -14.25,0.43c-0.12,0.01 -0.25,0.02 -0.37,0.02c-2.38,0 -4.4,-1.87 -4.59,-4.25c-0.2,-2.54 1.69,-4.76 4.23,-4.97c0.62,-0.05 6.36,-0.49 15.2,-0.49c12.19,0 30.66,0.85 49.45,4.87c15.32,3.29 25.35,9.49 29.81,18.42c4.67,9.36 1.32,18.09 0.19,20.54c-1.38,2.98 -5.6,10.52 -14.98,16.32c-8.06,4.99 -17.89,7.52 -29.22,7.52z" fill="#f7dcc6" id="svg_7"/>
      <path d="m39.73,21.06c12.3,0 30.59,0.86 49.19,4.85c14.93,3.2 24.67,9.17 28.95,17.75c4.42,8.86 1.25,17.13 0.17,19.45c-1.33,2.88 -5.41,10.16 -14.5,15.79c-7.88,4.88 -17.45,7.33 -28.56,7.33c-3.38,0 -6.9,-0.23 -10.56,-0.68c-3.59,-0.45 -7.17,-0.97 -10.74,-1.56c-19.58,-3.28 -30.6,-7.62 -35.31,-9.84c-1.85,-0.88 -2.64,-3.1 -1.75,-4.95s3.09,-2.64 4.94,-1.76c6.36,3.04 20.44,8.54 43.69,11.43c3.38,0.42 6.63,0.63 9.73,0.63c9.84,0 18.23,-2.11 25.02,-6.32c7.55,-4.67 10.86,-10.57 11.94,-12.9c0.76,-1.63 2.99,-7.44 -0.09,-13.62c-3.27,-6.56 -11.69,-11.46 -24.34,-14.18c-17.97,-3.85 -35.99,-4.66 -48,-4.66c-8.67,0 -14.21,0.42 -14.34,0.43c-1.82,0.1 -3.39,-1.27 -3.54,-3.09s1.18,-3.42 3,-3.61c0.54,-0.05 6.28,-0.49 15.1,-0.49m0,-2.5c-8.9,0 -14.67,0.44 -15.3,0.49c-3.23,0.27 -5.63,3.09 -5.38,6.32c0.24,3.02 2.81,5.39 5.84,5.39c0.16,0 0.32,0 0.48,-0.01c0.05,-0.01 5.5,-0.43 14.14,-0.43c11.85,0 29.7,0.8 47.47,4.61c11.89,2.54 19.71,6.99 22.63,12.85c2.59,5.17 0.7,10.07 0.06,11.45c-0.98,2.12 -4.02,7.51 -10.99,11.82c-6.37,3.94 -14.34,5.94 -23.7,5.94c-2.99,0 -6.16,-0.2 -9.42,-0.61c-22.91,-2.84 -36.72,-8.24 -42.92,-11.2c-0.83,-0.4 -1.75,-0.61 -2.68,-0.61c-2.83,0 -5.31,1.92 -6.02,4.66c-0.74,2.89 0.67,5.9 3.36,7.17c4.92,2.33 16.13,6.73 35.97,10.05c3.46,0.58 7.11,1.11 10.84,1.57c3.75,0.47 7.4,0.7 10.87,0.7c11.57,0 21.62,-2.59 29.88,-7.69c9.66,-5.99 14.03,-13.79 15.45,-16.87c1.2,-2.58 4.72,-11.76 -0.2,-21.62c-4.63,-9.29 -14.95,-15.71 -30.67,-19.08c-18.89,-4.05 -37.46,-4.9 -49.71,-4.9zm19.07,88.48c-2.07,0 -3.95,-0.11 -5.43,-0.31c-4.64,-0.64 -11.99,-2.97 -15.42" id="svg_8"/>
      </g>
    </g>
    </svg>
    </div>
  );
};

export default Eye;
