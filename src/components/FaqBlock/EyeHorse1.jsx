import React, { useState, useEffect } from "react";
import style from "./EyeHorse.module.scss";

const Eye = ({ size = 3.58 }) => {
  // Размер глаза в vw (например, 10vw)
  const [pupilPosition, setPupilPosition] = useState({ x: 0, y: 0 });

  const handleMouseMove = (event) => {
    // Устанавливаем координаты центра глаза
    const eyeCenterX = window.innerWidth / 2; // Центр глаза по горизонтали
    const eyeCenterY = window.innerHeight / 2; // Центр глаза по вертикали

    // Вычисляем угол наклона относительно мыши
    const angle = Math.atan2(event.clientY - eyeCenterY, event.clientX - eyeCenterX);

    // Ограничиваем смещение зрачка
    const pupilOffset = (window.innerWidth * (size / 100)) * 0.1; // Максимальное смещение зрачка (10% от размера глаза)
    const pupilX = Math.cos(angle) * pupilOffset;
    const pupilY = Math.sin(angle) * pupilOffset;

    setPupilPosition({ x: pupilX, y: pupilY });
  };

  useEffect(() => {
    document.addEventListener("mousemove", handleMouseMove);
    return () => {
      document.removeEventListener("mousemove", handleMouseMove);
    };
  }, [size]);

  // Размер глаза в пикселях, рассчитанный из vw
  const scaledSize = (window.innerWidth * size) / 100;

  return (
    <div
      className={style.eye_container_horse}
      style={{
        width: `${scaledSize}px`, // Размер глаза в пикселях
        height: `${scaledSize}px`,
        margin: "auto",
        position: "relative",
        overflow: "visible", // Убедимся, что глаз не обрезается
      }}
    >
      <svg
        width={scaledSize}
        height={scaledSize} // Сохраняем квадратные пропорции
        viewBox="0 0 140 140"
        xmlns="http://www.w3.org/2000/svg"
        xmlnsSvg="http://www.w3.org/2000/svg"
        enableBackground="new 0 0 3840 1989.254"
        xmlSpace="preserve"
        style={{
          display: "block",
          overflow: "visible",
        }}
      >


        <g className="layer" >
          <title>Layer 1</title>
          <g id="svg_1">
            {/* Основная часть глаза */}
            <path d="m26.67,349.11c-0.03,-0.01 -0.06,-0.02 -0.09,-0.03c-0.42,1.53 -0.52,3.46 -0.26,5.8c0.43,4.03 1.79,8.85 3.86,13.59c2.53,5.83 8.21,11.22 15.18,14.42c3.78,1.74 9.08,3.37 15.68,3.37c3.77,0 7.95,-0.54 12.52,-1.89c11.72,-3.47 19.5,-10.19 23.98,-15.23c5.14,-5.77 7.95,-11.53 8.37,-14.44l0.06,-0.39c0.36,-2.42 0.72,-4.89 -0.71,-6.78c-24.95,8.63 -53.1,7.26 -78.58,1.58z" fill="#faa9d5" id="svg_2"/>
            <path d="m102.28,346.69c-1.13,-1.11 -3.09,-2.27 -8.3,-1.3c-2,0.37 -4.24,1.16 -6.83,2.07c-7.45,2.62 -18.71,6.58 -34.68,3.66c-11.44,-2.09 -17.05,-4.26 -20.4,-5.56c-3.34,-1.29 -5.54,-2.14 -8.61,-0.56c-2.68,1.37 -3.76,4.92 -3.2,10.56c0.45,4.48 1.88,9.84 4.04,15.09c2.66,6.48 8.6,12.46 15.89,16.01c3.95,1.92 9.5,3.73 16.4,3.73c3.94,0 8.33,-0.59 13.1,-2.09c12.26,-3.85 20.42,-11.32 25.1,-16.9c5.38,-6.42 8.32,-12.81 8.77,-16.03l0.06,-0.44c0.42,-2.99 0.86,-6.07 -1.34,-8.23z" fill="#fee67f" id="svg_3"/>
            
            <path
            style={{
                transform: `translate(${pupilPosition.x}px, ${pupilPosition.y}px)`,
                transition: "transform 0.05s",
            }}
            d="m22.66,348.15c-0.03,-0.01 -0.06,-0.02 -0.09,-0.03c-0.41,1.57 -0.51,3.55 -0.26,5.95c0.42,4.13 1.77,9.08 3.81,13.94c2.5,5.98 8.11,11.51 14.99,14.79c3.73,1.78 8.97,3.46 15.48,3.46c3.72,0 7.85,-0.55 12.36,-1.94c11.57,-3.56 19.26,-10.45 23.68,-15.62c5.08,-5.92 7.85,-11.83 8.27,-14.81l0.06,-0.4c0.36,-2.48 0.71,-5.02 -0.7,-6.96c-24.64,8.85 -52.44,7.45 -77.6,1.62z" fill="#faa9d5" id="svg_2"/>
            {/* Зрачок */}
            <path
            style={{
                transform: `translate(${pupilPosition.x}px, ${pupilPosition.y}px)`,
                transition: "transform 0.05s",
            }}
             className="pupil"
             d="m40.66,369a20,20 0 1,0 40,0a20,20 0 1,0 -40,0"
             fill="#1c1a19"
             id="svg_1"
             stroke="#000"
             strokeLinecap="round"
             strokeLinejoin="round"
             strokeMiterlimit="10"
             />
            <path d="m57.9,397.15c-7.71,0 -15.06,-1.64 -21.84,-4.88c-9.76,-4.66 -17.73,-12.53 -21.3,-21.07c-2.84,-6.77 -4.73,-13.7 -5.32,-19.5c-0.81,-7.9 0.9,-12.96 5.07,-15.05c1.69,-0.84 3.33,-1.25 5,-1.25c2.46,0 4.79,0.88 7.48,1.9c4.26,1.61 11.39,4.3 25.93,6.91c4.7,0.84 9.4,1.27 13.95,1.27c12.91,0 22.66,-3.36 29.78,-5.81c3.4,-1.18 6.34,-2.19 9.04,-2.68c1.76,-0.32 3.38,-0.48 4.79,-0.48c4.24,0 6.26,1.47 7.41,2.58c3.47,3.34 2.81,7.88 2.23,11.89l-0.08,0.55c-0.63,4.44 -4.49,12.69 -11.67,21.08c-6.18,7.21 -16.93,16.85 -33.11,21.83c-5.84,1.79 -11.68,2.71 -17.35,2.71l-0.01,0zm-37.17,-49.92c-0.13,3.06 0.65,10.08 4.62,19.53c1.94,4.64 7.08,11.05 15.65,15.14c5.22,2.49 10.91,3.75 16.92,3.75c4.53,0 9.23,-0.74 13.97,-2.19c13.54,-4.17 22.57,-12.27 27.75,-18.32c6.28,-7.34 8.82,-13.74 9.03,-15.24l0.09,-0.56c0.05,-0.39 0.11,-0.81 0.17,-1.24c-0.35,0.05 -0.74,0.11 -1.19,0.19c-1.83,0.34 -4.39,1.22 -7.34,2.24c-7.91,2.72 -18.74,6.45 -33.4,6.45c-5.24,0 -10.66,-0.49 -16.1,-1.46c-15.6,-2.8 -23.34,-5.73 -27.97,-7.48c-0.73,-0.28 -1.46,-0.55 -2.2,-0.81z" fill="#dce3f4" id="svg_5"/>
            <path d="m17.52,338.15c2.13,0 4.22,0.79 6.86,1.78c4.31,1.64 11.53,4.37 26.24,7c5.12,0.92 9.87,1.3 14.25,1.3c13.21,0 23.16,-3.43 30.35,-5.91c3.34,-1.15 6.22,-2.14 8.78,-2.61c1.76,-0.32 3.24,-0.45 4.48,-0.45c3.47,0 5.12,1.06 6.2,2.09c2.82,2.72 2.25,6.61 1.71,10.37l-0.08,0.55c-0.58,4.06 -4.35,12.12 -11.27,20.2c-6.03,7.03 -16.52,16.43 -32.29,21.29c-6.14,1.89 -11.78,2.63 -16.85,2.63c-8.86,0 -16,-2.28 -21.09,-4.7c-9.38,-4.48 -17.02,-12.02 -20.44,-20.17c-2.78,-6.62 -4.62,-13.36 -5.19,-19c-0.72,-7.1 0.66,-11.58 4.11,-13.3c1.53,-0.76 2.89,-1.07 4.23,-1.07m38.4,50.25c4.34,0 9.18,-0.64 14.48,-2.27c13.95,-4.29 23.24,-12.62 28.57,-18.85c6.41,-7.48 9.16,-14.21 9.44,-16.13l0.08,-0.57c0.16,-1.09 0.36,-2.49 0.37,-3.34c-0.12,-0.01 -0.24,-0.01 -0.36,-0.01c-0.62,0 -1.59,0.07 -3.07,0.34c-1.97,0.35 -4.58,1.26 -7.61,2.3c-7.75,2.67 -18.46,6.36 -32.82,6.36l0,0c-4.84,0 -10.1,-0.42 -15.79,-1.44c-15.44,-2.76 -23.09,-5.66 -27.66,-7.39c-2.5,-0.95 -3.44,-1.25 -3.97,-1.25c-0.11,0 -0.2,0.01 -0.29,0.03c-0.75,2.07 -0.53,10.4 4.44,22.26c2.07,4.93 7.5,11.74 16.52,16.05c4.24,2.02 10.21,3.91 17.67,3.91m-38.4,-53.76c-1.96,0 -3.85,0.48 -5.79,1.45c-4.89,2.44 -6.92,8.09 -6.04,16.79c0.61,5.97 2.55,13.07 5.45,20c3.74,8.92 12.03,17.14 22.17,21.97c7.01,3.35 14.62,5.05 22.6,5.05c5.84,0 11.86,-0.94 17.87,-2.79c16.58,-5.1 27.6,-14.98 33.92,-22.36c7.41,-8.66 11.41,-17.28 12.08,-21.98l0.08,-0.55c0.57,-3.97 1.36,-9.43 -2.75,-13.39c-2.18,-2.1 -4.92,-3.07 -8.63,-3.07c-1.52,0 -3.24,0.17 -5.11,0.51c-2.82,0.51 -5.82,1.54 -9.29,2.74c-7,2.41 -16.59,5.72 -29.21,5.72c-4.45,0 -9.04,-0.42 -13.64,-1.24c-14.39,-2.58 -21.42,-5.24 -25.61,-6.83c-2.86,-1.08 -5.33,-2.02 -8.1,-2.02zm38.4,50.26c-5.75,0 -11.18,-1.2 -16.16,-3.58c-8.13,-3.88 -12.98,-9.9 -14.8,-14.24c-3.11,-7.42 -4.13,-12.99 -4.4,-16.31c4.71,1.78 12.55,4.69 28.03,7.47c5.54,0.99 11.06,1.49 16.41,1.49c14.95,0 25.94,-3.79 33.97,-6.55c2.22,-0.77 4.21,-1.46 5.79,-1.87c-0.64,1.92 -2.98,7.3 -8.45,13.69c-5.03,5.88 -13.79,13.74 -26.93,17.78c-4.57,1.41 -9.1,2.12 -13.46,2.12z" id="svg_4"/>
          </g>
        </g>
      </svg>
    </div>
  );
};

export default Eye;